# 组成部分
## 停车数据采集
### 室内数据
室内通过调用上级http接口同步值平台
### 路侧数据
1. IPC采集数据
> 设备网关采集到数据后，通过kafka消息同步至路侧服务，路侧处理后，通过消息同步至 <font color=#D87093>数据中心</font>
2. 地磁采集数据
> 地磁采集到数据后，通过接口发送至路侧服务，路侧处理后，通过消息同步至数据中心
3. 手持机登记数据
> 手持机调用路侧接口，路侧处理后，通过消息发送至数据中心
4. web页面登记
> web页面调用数据中心接口，数据中心处理后调用路侧接口登记数据，登记成功后，请求返回登记信息至数据中心
## 停车数据处理
### 室内数据处理
1. 停车原始记录
> 室内同步数据后生成停车记录，以dataCenterId为关联字段确定唯一性
2. 数据匹配
> 根据seqCode为关联字段确定唯一性，如果没有seqCode，依次根据下级平台编号、停车场编号、车牌号、入场时间根据不同场景做不同方式匹配
### 路侧数据处理
1. 停车原始记录
> 路侧服务接收到数据后，根据条件生成停车记录，通过接口同步至数据中心。
## 在停数据处理（实时停车管理）
### 室内在停数据处理
1. 核对车牌
> 通过下级接口同步核对状态；修改上级核对状态
2. 修改车牌、入场时间
> 通过下级接口同步修改信息；修改上级信息
3. 增加出场时间
> 通过下级接口同步出场信息；修改上级信息；刷新泊位数
### 路侧在停数据处理
1. 核对车牌
> 数据中心核对；同步修改路侧核对状态
2. 修改车牌、入场时间
> 调用路侧修改接口；通过返回信息修改数据中心数据
3. 增加出场时间
> 调用路侧修订接口；通过返回信息修改数据中心数据
4. 登记车辆
> 数据中心预处理；调用路侧登记接口；通过返回信息增加数据中心数据
## 停车数据使用
### 路侧数据支付
路侧停车支付数据来源
### 小程序、H5查询
小程序、H5停车数据查询来源
### 欠费订单
web页面欠费订单查询来源
### 统计报表
营收、订单、服务车辆、服务次数相关
> [营收明细](http://citypark-dev.cloud-dahua.com/#/revenue/revenueDetail)，[停车欠费管理](http://citypark-dev.cloud-dahua.com/#/workbench/parkingArrearsManager)等
### 数据可视化
营收、订单、服务车辆、服务次数相关
> [营收明细](http://citypark-dev.cloud-dahua.com/#/revenue/revenueDetail)，[魔墙](http://citypark-dev.cloud-dahua.com/#/overview/dataOverview)等
## 停车数据接出第三方
1. 接出至支付宝无感支付停车数据
2. 接出至各个第三方平台
## 停车缴费
### 室内停车缴费数据
1. 室内缴费数据同步
> 下级平台通过调用平台http接口同步数据至平台
2. 缴费数据匹配订单
> 根据seqCode为关联字段确定唯一性，如果没有seqCode，依次根据下级平台编号、停车场编号、车牌号、入场时间根据不同场景做不同方式匹配
### 路侧停车缴费数据
1. 在场缴费
> 通过消息接入至数据中心，数据中心通过计算差值确定缴费金额和其他信息
2. 缴欠费
> 通过http接口接入之数据中心，数据中心生成缴费金额和其他信息
### 缴费数据使用
1. 实收相关报表和可视化
[魔墙](http://citypark-dev.cloud-dahua.com/#/overview/dataOverview)等
